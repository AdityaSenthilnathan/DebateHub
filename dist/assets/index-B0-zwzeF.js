import{r as n,R as b,j as r,u as me,a as le}from"./index-C8EDZPUb.js";import{P as Fe}from"./PageLayout-CMTgZflG.js";import{f as Z,u as E,o as ee,p as pe,s as D,l as J,O as Pe,U as te,y as fe,v as T,a as he,b as C,t as ie,c as Te,d as N,C as xe,e as ge,_ as oe,H as Se}from"./index-CL-uP7T5.js";import{u as Le}from"./index.esm-Dj6ELGzU.js";import{a as I,G as Re,r as Ue,d as de,E as $e,b as ke,F as De}from"./index-CibO5izo.js";import{I as $,B as S,g as Oe}from"./index-DFSNi_Mx.js";import{u as Ae}from"./index-DpURr4ks.js";import{u as Me}from"./index-C5OYWTo9.js";function He(t=0){let[e,s]=n.useState(t),a=Z(),u=n.useCallback(i=>{a.current&&s(l=>l|i)},[e,a]),c=n.useCallback(i=>!!(e&i),[e]),p=n.useCallback(i=>{a.current&&s(l=>l&~i)},[s,a]),d=n.useCallback(i=>{a.current&&s(l=>l^i)},[s]);return{flags:e,addFlag:u,hasFlag:c,removeFlag:p,toggleFlag:d}}function Ie(t){let e={called:!1};return(...s)=>{if(!e.called)return e.called=!0,t(...s)}}function K(t,...e){t&&e.length>0&&t.classList.add(...e)}function Q(t,...e){t&&e.length>0&&t.classList.remove(...e)}function Be(t,e){let s=ee();if(!t)return s.dispose;let{transitionDuration:a,transitionDelay:u}=getComputedStyle(t),[c,p]=[a,u].map(i=>{let[l=0]=i.split(",").filter(Boolean).map(m=>m.includes("ms")?parseFloat(m):parseFloat(m)*1e3).sort((m,g)=>g-m);return l}),d=c+p;if(d!==0){s.group(l=>{l.setTimeout(()=>{e(),l.dispose()},d),l.addEventListener(t,"transitionrun",m=>{m.target===m.currentTarget&&l.dispose()})});let i=s.addEventListener(t,"transitionend",l=>{l.target===l.currentTarget&&(e(),i())})}else e();return s.add(()=>e()),s.dispose}function Ge(t,e,s,a){let u=s?"enter":"leave",c=ee(),p=a!==void 0?Ie(a):()=>{};u==="enter"&&(t.removeAttribute("hidden"),t.style.display="");let d=E(u,{enter:()=>e.enter,leave:()=>e.leave}),i=E(u,{enter:()=>e.enterTo,leave:()=>e.leaveTo}),l=E(u,{enter:()=>e.enterFrom,leave:()=>e.leaveFrom});return Q(t,...e.base,...e.enter,...e.enterTo,...e.enterFrom,...e.leave,...e.leaveFrom,...e.leaveTo,...e.entered),K(t,...e.base,...d,...l),c.nextFrame(()=>{Q(t,...e.base,...d,...l),K(t,...e.base,...d,...i),Be(t,()=>(Q(t,...e.base,...d),K(t,...e.base,...e.entered),p()))}),c.dispose}function ze({immediate:t,container:e,direction:s,classes:a,onStart:u,onStop:c}){let p=Z(),d=pe(),i=D(s);J(()=>{t&&(i.current="enter")},[t]),J(()=>{let l=ee();d.add(l.dispose);let m=e.current;if(m&&i.current!=="idle"&&p.current)return l.dispose(),u.current(i.current),l.add(Ge(m,a.current,i.current==="enter",()=>{l.dispose(),c.current(i.current)})),l.dispose},[s])}function y(t=""){return t.split(/\s+/).filter(e=>e.length>1)}let B=n.createContext(null);B.displayName="TransitionContext";var _e=(t=>(t.Visible="visible",t.Hidden="hidden",t))(_e||{});function qe(){let t=n.useContext(B);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function Ve(){let t=n.useContext(G);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let G=n.createContext(null);G.displayName="NestingContext";function z(t){return"children"in t?z(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function ve(t,e){let s=D(t),a=n.useRef([]),u=Z(),c=pe(),p=C((x,f=T.Hidden)=>{let h=a.current.findIndex(({el:o})=>o===x);h!==-1&&(E(f,{[T.Unmount](){a.current.splice(h,1)},[T.Hidden](){a.current[h].state="hidden"}}),c.microTask(()=>{var o;!z(a)&&u.current&&((o=s.current)==null||o.call(s))}))}),d=C(x=>{let f=a.current.find(({el:h})=>h===x);return f?f.state!=="visible"&&(f.state="visible"):a.current.push({el:x,state:"visible"}),()=>p(x,T.Unmount)}),i=n.useRef([]),l=n.useRef(Promise.resolve()),m=n.useRef({enter:[],leave:[],idle:[]}),g=C((x,f,h)=>{i.current.splice(0),e&&(e.chains.current[f]=e.chains.current[f].filter(([o])=>o!==x)),e==null||e.chains.current[f].push([x,new Promise(o=>{i.current.push(o)})]),e==null||e.chains.current[f].push([x,new Promise(o=>{Promise.all(m.current[f].map(([L,R])=>R)).then(()=>o())})]),f==="enter"?l.current=l.current.then(()=>e==null?void 0:e.wait.current).then(()=>h(f)):h(f)}),j=C((x,f,h)=>{Promise.all(m.current[f].splice(0).map(([o,L])=>L)).then(()=>{var o;(o=i.current.shift())==null||o()}).then(()=>h(f))});return n.useMemo(()=>({children:a,register:d,unregister:p,onStart:g,onStop:j,wait:l,chains:m}),[d,p,a,g,j,m,l])}function We(){}let Ke=["beforeEnter","afterEnter","beforeLeave","afterLeave"];function ce(t){var e;let s={};for(let a of Ke)s[a]=(e=t[a])!=null?e:We;return s}function Qe(t){let e=n.useRef(ce(t));return n.useEffect(()=>{e.current=ce(t)},[t]),e}let Ye="div",be=Pe.RenderStrategy;function Je(t,e){var s,a;let{beforeEnter:u,afterEnter:c,beforeLeave:p,afterLeave:d,enter:i,enterFrom:l,enterTo:m,entered:g,leave:j,leaveFrom:x,leaveTo:f,...h}=t,o=n.useRef(null),L=fe(o,e),R=(s=h.unmount)==null||s?T.Unmount:T.Hidden,{show:v,appear:F,initial:se}=qe(),[P,_]=n.useState(v?"visible":"hidden"),ae=Ve(),{register:O,unregister:A}=ae;n.useEffect(()=>O(o),[O,o]),n.useEffect(()=>{if(R===T.Hidden&&o.current){if(v&&P!=="visible"){_("visible");return}return E(P,{hidden:()=>A(o),visible:()=>O(o)})}},[P,o,O,A,v,R]);let q=D({base:y(h.className),enter:y(i),enterFrom:y(l),enterTo:y(m),entered:y(g),leave:y(j),leaveFrom:y(x),leaveTo:y(f)}),M=Qe({beforeEnter:u,afterEnter:c,beforeLeave:p,afterLeave:d}),V=he();n.useEffect(()=>{if(V&&P==="visible"&&o.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[o,P,V]);let we=se&&!F,ne=F&&v&&se,ye=!V||we?"idle":v?"enter":"leave",k=He(0),Ne=C(w=>E(w,{enter:()=>{k.addFlag(N.Opening),M.current.beforeEnter()},leave:()=>{k.addFlag(N.Closing),M.current.beforeLeave()},idle:()=>{}})),Ee=C(w=>E(w,{enter:()=>{k.removeFlag(N.Opening),M.current.afterEnter()},leave:()=>{k.removeFlag(N.Closing),M.current.afterLeave()},idle:()=>{}})),H=ve(()=>{_("hidden"),A(o)},ae),W=n.useRef(!1);ze({immediate:ne,container:o,classes:q,direction:ye,onStart:D(w=>{W.current=!0,H.onStart(o,w,Ne)}),onStop:D(w=>{W.current=!1,H.onStop(o,w,Ee),w==="leave"&&!z(H)&&(_("hidden"),A(o))})});let U=h,Ce={ref:L};return ne?U={...U,className:ie(h.className,...q.current.enter,...q.current.enterFrom)}:W.current&&(U.className=ie(h.className,(a=o.current)==null?void 0:a.className),U.className===""&&delete U.className),b.createElement(G.Provider,{value:H},b.createElement(Te,{value:E(P,{visible:N.Open,hidden:N.Closed})|k.flags},xe({ourProps:Ce,theirProps:U,defaultTag:Ye,features:be,visible:P==="visible",name:"Transition.Child"})))}function Xe(t,e){let{show:s,appear:a=!1,unmount:u=!0,...c}=t,p=n.useRef(null),d=fe(p,e);he();let i=ge();if(s===void 0&&i!==null&&(s=(i&N.Open)===N.Open),![!0,!1].includes(s))throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[l,m]=n.useState(s?"visible":"hidden"),g=ve(()=>{m("hidden")}),[j,x]=n.useState(!0),f=n.useRef([s]);J(()=>{j!==!1&&f.current[f.current.length-1]!==s&&(f.current.push(s),x(!1))},[f,s]);let h=n.useMemo(()=>({show:s,appear:a,initial:j}),[s,a,j]);n.useEffect(()=>{if(s)m("visible");else if(!z(g))m("hidden");else{let v=p.current;if(!v)return;let F=v.getBoundingClientRect();F.x===0&&F.y===0&&F.width===0&&F.height===0&&m("hidden")}},[s,g]);let o={unmount:u},L=C(()=>{var v;j&&x(!1),(v=t.beforeEnter)==null||v.call(t)}),R=C(()=>{var v;j&&x(!1),(v=t.beforeLeave)==null||v.call(t)});return b.createElement(G.Provider,{value:g},b.createElement(B.Provider,{value:h},xe({ourProps:{...o,as:n.Fragment,children:b.createElement(je,{ref:d,...o,...c,beforeEnter:L,beforeLeave:R})},theirProps:{},defaultTag:n.Fragment,features:be,visible:l==="visible",name:"Transition"})))}function Ze(t,e){let s=n.useContext(B)!==null,a=ge()!==null;return b.createElement(b.Fragment,null,!s&&a?b.createElement(X,{ref:e,...t}):b.createElement(je,{ref:e,...t}))}let X=te(Xe),je=te(Je),et=te(Ze),Y=Object.assign(X,{Child:et,Root:X});function re({open:t,setOpen:e,children:s}){return r.jsx(Y.Root,{show:t,as:n.Fragment,children:r.jsxs(oe,{as:"div",className:"relative z-10",onClose:e,children:[r.jsx(Y.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:r.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),r.jsx("div",{className:"fixed inset-0 z-10 w-screen overflow-y-auto",children:r.jsx("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:r.jsx(Y.Child,{as:n.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:r.jsxs(oe.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-sm sm:p-6",children:[s," "]})})})})]})})}const tt=({user:t})=>{const[e,s]=n.useState(t==null?void 0:t.email),[a,u]=n.useState(""),[c,p]=n.useState(""),[d,i]=n.useState(!1);return d?r.jsx("div",{children:"Loading..."}):r.jsxs("div",{className:"flex flex-col gap-4",children:[r.jsx("div",{children:r.jsx($,{label:"Current Email address",name:"email",value:e,onChange:s})}),r.jsx("div",{children:r.jsx($,{label:"New Email address",name:"email",value:a,onChange:u})}),r.jsx("div",{children:r.jsx($,{label:"Password",name:"password",value:c,onChange:p})}),r.jsx("div",{children:r.jsx(S,{text:"Update Email",type:"button",handleClick:()=>{Ae(e,a,c,i)}})})]})},rt=({user:t})=>{const[e,s]=n.useState(!1);return r.jsx("div",{className:"space-y-12",children:r.jsxs("div",{className:"grid grid-cols-1 gap-x-8 gap-y-10 border-b  pb-12 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-base font-semibold leading-7",children:"Email"}),r.jsx("p",{className:"mt-1 text-sm leading-6",children:"Update your email address"})]}),r.jsx("div",{className:"grid max-w-2xl grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6 md:col-span-2",children:r.jsxs("div",{className:"sm:col-span-4",children:[r.jsx("div",{className:"w-1/2 mt-4",children:r.jsx(S,{text:"Update Email",type:"button",handleClick:()=>s(!e)})}),r.jsx(re,{open:e,setOpen:s,children:r.jsx(tt,{user:t})})]})})]})})},st=()=>{const t=me(),[e,s]=b.useState(""),[a,u]=b.useState(""),[c,p]=b.useState(!1);return c?r.jsx("div",{children:"Loading..."}):r.jsxs("div",{className:"mt-4 text-sm text-gray-500 gap-4 flex flex-col",children:["Please enter your password to delete your account:",r.jsx($,{label:"Current Password",name:"current-password",value:e,onChange:s}),r.jsx($,{label:"New Password",name:"new-password",value:a,onChange:u}),r.jsx(S,{text:"Confirm password change",type:"button",handleClick:()=>Me(e,a,t,p)})]})},at=()=>{const[t,e]=n.useState(!1);return r.jsx("form",{onSubmit:s=>{s.preventDefault()},children:r.jsx("div",{className:"space-y-12",children:r.jsxs("div",{className:"grid grid-cols-1 gap-x-8 gap-y-10 border-b  pb-12 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-base font-semibold leading-7",children:"Password"}),r.jsx("p",{className:"mt-1 text-sm leading-6",children:"Update your password"})]}),r.jsx("div",{className:"grid max-w-2xl grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6 md:col-span-2",children:r.jsxs("div",{className:"sm:col-span-4",children:[r.jsx("div",{className:"w-1/2 mt-4",children:r.jsx(S,{text:"Change Password",type:"button",handleClick:()=>e(!t)})}),r.jsx(re,{open:t,setOpen:e,children:r.jsx(st,{})})]})})]})})})},ue=async(t,e,s,a,u)=>{var p;const c=(p=I)==null?void 0:p.currentUser;if(!(!c||c===null))try{if(a(!0),s){const d=new Re;await Ue(c,d),await de(c),t(le.Home)}if(e){if(!u||u===""){alert("Please enter your password");return}const d=c.email,i=$e.credential(d,u);await ke(c,i),await de(c),t(le.Home)}}catch(d){if(d instanceof De){Oe(d);return}}finally{a(!1)}},nt=()=>{var d,i,l,m;const t=me(),[e,s]=b.useState(""),[a,u]=b.useState(!1),c=(i=(d=I)==null?void 0:d.currentUser)==null?void 0:i.providerData.some(g=>g.providerId==="password"),p=(m=(l=I)==null?void 0:l.currentUser)==null?void 0:m.providerData.some(g=>g.providerId==="google.com");if(a)return r.jsx("div",{children:"Loading..."});if(p)return r.jsx("div",{className:"mt-4 text-sm text-gray-500 flex flex-col gap-4",children:r.jsx(S,{text:"Confirm delete",type:"button",handleClick:()=>ue(t,!1,!0,u)})});if(c)return r.jsxs("div",{className:"mt-4 text-sm text-gray-500 flex flex-col gap-4",children:["Please enter your password to delete your account:",r.jsx($,{label:"Password",name:"password",value:e,onChange:s}),r.jsx(S,{text:"Confirm delete",type:"button",handleClick:()=>ue(t,!0,!1,u,e)})]})},lt=()=>{const[t,e]=n.useState(!1);return r.jsx("div",{children:r.jsx("div",{className:"space-y-12",children:r.jsxs("div",{className:"grid grid-cols-1 gap-x-8 gap-y-10 border-b  pb-12 md:grid-cols-3",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-base font-semibold leading-7",children:"Account"}),r.jsx("p",{className:"mt-1 text-sm leading-6",children:"Delete your account"})]}),r.jsx("div",{className:"grid max-w-2xl grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6 md:col-span-2",children:r.jsxs("div",{className:"sm:col-span-4",children:[r.jsx("div",{className:"w-1/2 mt-4",children:r.jsx(S,{text:"Delete Account",type:"button",handleClick:()=>e(!t)})}),r.jsx(re,{open:t,setOpen:e,children:r.jsx(nt,{})})]})})]})})})};function it(){const[t,e]=Le(I);if(e)return r.jsx("div",{children:"Loading..."});if(!t||t===null)return r.jsx("div",{children:"Not Found"});const s=t.providerData[0].providerId==="google.com";return r.jsxs("div",{className:"mt-6 gap-8 flex flex-col h-screen",children:[r.jsx("h2",{className:"text-2xl font-bold leading-7  sm:truncate sm:text-3xl sm:tracking-tight",children:"My Account"}),s?r.jsx("p",{children:"you are a google user"}):r.jsxs(r.Fragment,{children:[r.jsx(rt,{user:t}),r.jsx(at,{})]}),r.jsx(lt,{})]})}const xt=()=>{const[t,e]=n.useState(!1);return r.jsxs(Fe,{darkMode:t,children:[r.jsx(Se,{darkMode:t,setDarkMode:e}),r.jsx("main",{className:"mx-auto max-w-7xl sm:px-6 lg:px-8",children:r.jsx(it,{})})]})};export{xt as default};
